# 스트림
- 자료의 대상과 관계 없이 동일한 연산을 수행
- 한 번 생성하고 사용한 스트림은 재사용 할 수 없음
- 스트림 연산은 기존 자료를 변경하지 않음
- 스트림 연산은 중간 연산과 최종 연산으로 구분 됨

## 스트림 연산 - 중간 연산
- 중간 연산 - fillter(), map()
조건에 맞는 요소를 추출 (filter()) 하거나 요소를 변환 함 (map())

- 문자열의 길이가 5 이상인 요소만 출력 하기

sList.stream().filter(s -> s.length() >= 5).forEach(s -> System.out.println(s))

## 스트림 연산 - 최종 연산

- 스트림의 자료를 소모 하면서 연산을 수행

- 최종 연산 후에 스트림은 더 이상 다른 연산을 적용할 수 없음

만약 sorted()를 쓴다면 String은 Comparable이 재정의되어 있기 때문에 상관없는데 다른 객체라면 재정의해줘야 함.

## reduce() 연산
- 정의된 연산이 아닌 프로그래머가 직접 지정하는 연산을 적용
- 최종 연산으로 스트림의 요소를 소모하며 연산 수행
- 배열의 모든 요소의 합계를 구하는 reduce() 연산

sum 이나 sort 같은 정의된 연산이 아닌 사용자 지정 연산

## 스트림이란
배열이나 컬렉션 또는 특정 범위 안에 있는 일련의 숫자를 처리하는 기능이 미리 구현되어 있다면 프로그램의 코드가 훨씬 간결해지고 일관성 있게 다룰 수 있습니다.

이렇게 여러 자료의 처리에 대한 기능을 구현해 놓은 클래스가 스트림(stream)입니다. 스트림을 활용하면 배열, 컬렉션 등의 자료를 일관성 있게 처리할 수 있습니다. 자료에 따라 기능을 각각 새로 구현하는 것이 아니라 처리해야 하는 자료가 무엇인지와 상관없이 같은 방식으로 메서드를 호출할 수 있기 때문입니다. 다른 말로는 자료를 추상화했다고 표현합니다.

forEach() 메서드(최종 연산)를 사용하여 배열의 요소를 하나씩 꺼내어 출력할 수 있습니다.

## 스트림 연산
크게 중간 연산, 최종 연산 두 가지가 있습니다. 

- 중간 연산
자료를 거르거나 변경하여 또 다른 자료를 내부적으로 생성합니다.

- 최종 연산
생성된 내부 자료를 소모해 가면서 연산을 수행합니다. 따라서 최종 연산은 마지막에 한 번만 호출됩니다. 그리고 최종 연산이 호출되어야 중간 연산의 결과가 만들어집니다.

### 중간 연산 - filter(), map()
filter()는 조건을 넣고 그 조건에 맞는 참인 경우만 추출하는 경우에 사용
map()은 클래스가 가진 자료 중 이름만 출력하는 경우에 사용
map()은 요소들을 순회하여 다른 형식으로 변환하기도 합니다.

즉, map()은 Int나 String 자료형을 구분하여 가져오고 이거를 이용해 int를 String으로 String을 int로 바꿀수도 있습니다.

### 최종 연산 - forEach(), count(), sum(), reduce()
최종 연산은 스트림의 자료를 소모하면서 연산을 수행하기 때문에 최종 연산이 수행되고 나면 해당 스트림은 더 이상 사용할 수 없습니다.
* stream()을 생성하면 버퍼가 생기고 버퍼에서 하나씩 뺴와서 출력하기 때문에 재활용은 불가능

최종 연산은 결과를 만드는 데 주로 사용합니다. forEach()는 앞에서도 보았듯이 요소를 하나씩 꺼내는 기능을 합니다. 통계용으로 사용되는 sum(), count() 배열 요소의 합계를 구한다든가 개수를 출력하는 등의 연산을 수행합니다.

## 스트림의 특징
- 자료의 대상과 관계없이 동일한 연산을 수행한다.
배열이나 컬렉션에 저장된 자료를 가지고 수행할 수 있는 연산은 여러 가지가 있습니다. 배열에 저장된 요소 값을 출력한다든지, 조건에 따라 자료를 추출하거나, 자료가 숫자일 때 합계·평균 등을 구할 수도 있습니다. 스트림은 컬렉션의 여러 자료 구조에 대해 이러한 작업을 일관성 있게 처리할 수 있는 메서드를 제공합니다.
- 한 번 생성하고 사용한 스트림은 재사용할 수 없다.
어떤 자료에 대한 스트림을 생성하고 이 스트림에 메서드를 호출하여 연산을 수행했다면 해당 스트림을 다시 다른 연산에 사용할 수 없습니다. 예를 들어 스트림을 생성하여 배열에 있는 요소를 출력하기 위해 각 요소들을 하나씩 순회하면서 출력에 사용하는데, 이때 요소들이 '소모된다'고 이야기합니다. 소모된 요소는 재사용할 수 없습니다. 만약 다른 기능을 호출하려면 스트림을 새로 생성해야 합니다.
- 스트림의 연산은 기존 자료를 변경하지 않는다.
스트림을 생성하여 정렬한다거나 합을 구하는 등의 여러 연산을 수행한다고 해서 기존 배열이나 컬렉션이 변경되지 않습니다. 스트림 연산을 위해 사용하는 메모리 공간이 별도로 존재하므로, 스트림의 여러 메서드를 호출하더라도 기존 자료에는 영향을 미치지 않습니다.
- 스트림의 연산은 중간 연산과 최종 연산이 있다.
스트림에서 사용하는 메서드는 크게 중간 연산과 최종 연산 두 가지로 나뉩니다. 스트림에 중간 연산은 여러 개가 적용될 수 있고, 최종 연산은 맨 마지막에 한 번 적용됩니다. ㄱ만약 중간 연산이 여러 개 호출되었떠라도 최종 연산이 호출되어야 스트림의 중간 연산 모두 적용 예를 들어 자료를 정렬하거나 검색하는 중간 연산이 호출되어도 최종 연산이 호출되지 않으면 정렬이나 검색한 결과를 가져올 수 없습니다. 이를 '지연 연산(lazy evaluation)'이라고 합니다. 

## reduce() 연산 
이제까지 우리가 사용한 연산은 기능이 미리 정해져 있습니다. reduce() 연산은 내부적으로 스트림의 요소를 하나씩 소모하면서 프로그래머가 직접 지정한 기능을 수행합니다. JDK에서 제공하는 reduce() 메서드의 정의는 다음과 같습니다.
Arrays.stream(arr).reduce(0, (a, b) -> a + b);