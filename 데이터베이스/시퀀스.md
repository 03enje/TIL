# 시퀀스
> 테이블 내의 유일한 숫자를 자동으로 생성해 줍니다.
```SQL
CREATE SEQUENCE sequence_name
                [START WITH n]
                [INCREMENT BY n]
                [{MAXVALUE n | NOMAXVALUE}]
                [{MINVALUE n | NOMINVALUE}]
                [{CYCLE | NOCYCLE}]
                [{CACHE n | NOCACHE}]
```
* START WITH - 시퀀스 번호의 시작값 지정
* INCREMENT BY - 시퀀스 번호의 증가치 지정
* MAXVALUE n - 시퀀스가 가질 수 있는 최댓값을 지정
* MINVALUE n - 시퀀스가 가질 수 있는 최솟값을 지정
* CYCLE - 시퀀스 값이 최댓값을 증가하면 시작값 부터 다시 시작
* CACHE n - 메모리상의 시퀀스 값을 관리
```SQL
 -- 시퀀스 생성
 CREATE SEQUENCE SEQ_DEPT_SEQUENCE -- 시퀀스 이름
         INCREMENT BY 10           -- 10만큼 증가
         START WITH 10             -- 10에서 시작
         MAXVALUE 90               -- 최댓값 90
         MINVALUE 0                -- 최솟값 0
         NOCYCLE                   -- 노사이클
         CACHE 2;                  -- 캐시용량 2
         
  SELECT *
   FROM USER_SEQUENCES;
   
-- 출력 결과 --
SEQUENCE_NAME                   MIN_VALUE  MAX_VALUE INCREMENT_BY C O CACHE_SIZE LAST_NUMBER
------------------------------ ---------- ---------- ------------ - - ---------- -----------
DEPARTMENTS_SEQ                         1       9990           10 N N          0         280
EMPLOYEES_SEQ                           1 1.0000E+28            1 N N          0         207
LOCATIONS_SEQ                           1       9900          100 N N          0        3300
SEQ_DEPT_SEQUENCE                       0         90           10 N N          2          30  -- 생성된 시퀀스
```
## 시퀀스 관련 데이터 사전
```SQL
 SELECT SEQUENCE_NAME, MIN_VALUE, MAX_VALUE
      , INCREMENT_BY, CYCLE_FLAG
   FROM USER_SEQUENCES;
```
* 생성된 시퀀스 객체에 대한 정보를 저장하는 데이터 사전은 USER_SEQUENCES 입니다.

## CURRVAL, NEXTVAL
> CURRVAL : 현재 값을 반환  
> NEXTVAL : 현재 시퀀스값의 다음 값을 반환
* CURRVAL에 새로운 값이 할당되기 위해서는 NEXTVAL로 새로운 값을 생성해야 합니다.
```SQL
 -- 현재 저장된 시퀀스값 반환(CURRVAL)
 SELECT SEQ_DEPT_SEQUENCE.CURRVAL FROM DUAL;
```
* NEXTVAL로 새로운 값을 생성하면 이 값은 CURRVAL로 대체가 됩니다.
```SQL
 -- 새로운 시퀀스값 생성(NEXTVAL)
 INSERT INTO DEPT_SEQUENCE (DNO, DNAME, LOC)
 VALUES(SEQ_DEPT_SEQUENCE.NEXTVAL, 'DATABASE', 'SEOUL');
```

## 시퀀스를 기본 키에 접목
```SQL
 -- 시퀀스 생성
 CREATE SEQUENCE DNO_SEQ
                 INCREMENT BY 10
                 START WITH 10;
 
 -- 시퀀스 접목
 INSERT INTO DEPT_SECOND VALUES (DNO_SEQ.NEXTVAL, 'ACCOUNTING', 'NEW YORK');
```
## 시퀀스 수정
```SQL
 ALTER SEQUENCE sequence_name
                [INCREMENT BY n]
                [{MAXVALUE n | NOMAXVALUE}]
                [{MINVALUE n | NOMINVALUE}]
                [{CYCLE | NOCYCLE}]
                [{CACHE n | NOCACHE}]
```
```SQL
 ALTER SEQUENCE DNO_SEQ
                MAXVALUE 50;
```
```SQL
 -- 시퀀스 수정
 ALTER SEQUENCE SEQ_DEPT_SEQUENCE
        INCREMENT BY 3 -- 3만큼 증가
        MAXVALUE 99    -- 최댓값 99
        CYCLE;         -- 사이클
```
## 시퀀스 제거
```SQL
 DROP SEQUENCE SEQ_DEPT_SEQUENCE;
```
## 사용자 시퀀스 검색
```SQL
 SELECT * FROM USER_SEQUENCES WHERE SEQUENCE_NAME = 'SEQ_DEPT_SEQUENCE';
```