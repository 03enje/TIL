# 뷰
> 물리적인 테이블을 근거한 논리적인 가상 테이블
* 디스크 저장 공간이 할당되지 않습니다.
```SQL
 CREATE [OR REPLACE] [FORCE | NOFORCE] VIEW view_name
 [(alias, alias, alias, ...)]
 AS subquery
 [WITH CHECK OPTION]
 [WITH READ ONLY];
```
* OR REPLACE - 뷰를 수정할 때 RROP 없이 수정 가능
* FORCE - 쿼리문의 테이블, 칼럼, 함수 등이 일부 존재하지 않아도 생성


## OR REPLACE
```SQL
-- 급여가 1500 초과인 사원들만 출력하는 <EMPIDX_OVER15K> 뷰 생성
-- 뷰가 이미 존재할 경우 새로운 내용으로 대체 가능
-- EMPIDX_OVER15K 뷰는 사원 번호, 사원 이름, 직책, 부서 번호, 급여
-- 추가 수당 열을 가지고 있습니다.
-- 추가 수당 열의 경우 추가 수당이 존재하면 O, 존재하지 않으면 X
-- OR REPLACE : DROP 테이블 없이 뷰를 생성 가능
CREATE OR REPLACE VIEW EMPIDX_OVER15K
AS (
    SELECT ENO, ENAME, JOB, DNO, SALARY
          , NVL2(COMMISSION, 'O', 'X') AS COMM
      FROM EMPIDX
     WHERE SALARY > 1500
);
```

## 뷰의 종류
* 뷰를 정의하기 위해서 사용되는 기본 테이블의 수에 따라 단순 뷰(Simple View)와 복합 뷰(Complex View)로 나뉩니다.
> 단순 뷰는 하나의 기본 테이블로 생성한 뷰입니다.  
> 복합 뷰는 두개 이상의 기본 테이블로 생성한 뷰입니다.

## 뷰의 이점
* 보안성
> 테이블의 특정 열을 노출하고 싶지 않을 경우
* 편리성
> SELECT 문의 복잡도를 완화하기 위해

## 뷰의 처리
* 시스템으로 부터 뷰 생성 권리 받기
```SQL
sysdba GRANT CREATE VIEW TO HR;
```

* 뷰 생성하기
```SQL
 -- 뷰 생성하기
 CREATE VIEW VW_EMP20
     AS ( SELECT eno, ename, job, dno
       FROM employee
      WHERE dno = 20 );
      
 SELECT * FROM VW_EMP20;

-- OUTPUT --
       ENO ENAME      JOB              DNO
---------- ---------- --------- ----------
      7369 SMITH      CLERK             20
      7566 JONES      MANAGER           20
      7788 SCOTT      ANALYST           20
      7876 ADAMS      CLERK             20
      7902 FORD       ANALYST           20
```

## 뷰 삭제
```SQL
 -- 삭제하기
 DROP VIEW VW_EMP20;
```

## 뷰 옵션
* WITH CHECK OPTION
> 해당 뷰를 통해서 볼 수 있는 범위내에서만 UPDATE 또는 INSERT가 가능합니다.
* WITH READ ONLY
> 해당 뷰를 통해서 DML문 중 SELECT 문 만 가능하게됩니다. 만약 생략한다면 모든 DML문이 가능합니다.
